(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/ad_list/ad_list"],{"4d09":function(t,e,n){"use strict";(function(t,e){var r=n("47a9");n("f01c");r(n("3240"));var a=r(n("87a6"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"87a6":function(t,e,n){"use strict";n.r(e);var r=n("f07b"),a=n("935c");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("c728");var i=n("828b"),u=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);e["default"]=u.exports},"935c":function(t,e,n){"use strict";n.r(e);var r=n("f4cf"),a=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=a.a},c728:function(t,e,n){"use strict";var r=n("eda8"),a=n.n(r);a.a},eda8:function(t,e,n){},f07b:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}));var r={uNavbar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-navbar/u-navbar")]).then(n.bind(null,"b7ff"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"d659"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"75c6"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.list.length),r=t.__map(t.list,(function(e,r){var a=t.__get_orig(e),o=0!=n?t.periodList.filter((function(t){return t.value==e.worker_salary_type})):null,i=0!=n?e.highlight.length:null,u=0!=n&&0!=i?e.highlight.length:null,c=0!=n&&0!=i?t.__map(e.highlight.slice(0,3),(function(n,r){var a=t.__get_orig(n),o=e.highlight.length;return{$orig:a,g4:o}})):null;return{$orig:a,g1:o,g2:i,g3:u,l0:c}})),a=t.list.length;t.$mp.data=Object.assign({},{$root:{g0:n,l1:r,g5:a}})},o=[]},f4cf:function(t,e,n){"use strict";(function(t){var r=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("7eb4")),o=r(n("34cf")),i=r(n("7ca3")),u=r(n("ee10")),c=n("8f59");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=getApp(),f={data:function(){return{showForm:!1,showEdit:!1,currentPro:null,ad_tracking_id:"",imgUrl:d.globalData.baseImageUrl,marginTop:d.globalData.marginTop,tabMargin:d.globalData.tabMargin,contHeight:0,periodList:[{value:"month",text:"/月"},{value:"day",text:"/天"},{value:"hour",text:"/时"}],list:[],currentPage:1,pagination:{},open_id:"",workerInfo:null,param:null}},components:{editForm:function(){n.e("components/edit_form").then(function(){return resolve(n("064b"))}.bind(null,n)).catch(n.oe)}},onLoad:function(e){t.setNavigationBarColor({frontColor:"#000000",backgroundColor:"transparent"})},onShow:function(){var t=this;return(0,u.default)(a.default.mark((function e(){var n,r,o,i;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.contHeight=d.globalData.systemHeight-t.marginTop-t.tabMargin,n=getCurrentPages(),r=n[n.length-1],o=r.$page.fullPath,i=o.split("?").length>1?o.split("?")[1]:"",i&&(console.log("urlParamStr",i),t.param=t.getQueryParams(o)),console.log("param",t.param),e.next=9,t.getOpenid();case 9:return t.open_id=e.sent,e.next=12,t.getWorderInfo();case 12:return t.workerInfo=e.sent,e.next=15,t.postParams(t.param);case 15:t.ad_tracking_id=e.sent,t.getList();case 17:case"end":return e.stop()}}),e)})))()},methods:l(l({},(0,c.mapMutations)(["setToken"])),{},{leftClick:function(){t.navigateTo({url:"/pages/index/index"})},getQueryParams:function(t){var e=t.split("?")[1];if(!e)return{};var n=e.split("&"),r={};return n.forEach((function(t){if(t){var e=t.split("="),n=(0,o.default)(e,2),a=n[0],i=n[1];r[decodeURIComponent(a)]=decodeURIComponent(i||"")}})),r},getList:function(){var e=this;t.showLoading();var n="/guest/worker/hot-jobs?page="+this.currentPage;this.$request(n).then((function(n){0==n.code&&(t.hideLoading(),e.list=n.data)}))},toDetail:function(e){var n=this.param.ad_platform?this.param.ad_platform:"",r=this.param.ad_sub_platform?this.param.ad_sub_platform:"";t.navigateTo({url:"/subpkg/ad_page/ad_page?job_id="+e.project_id+"&ad_tracking_id="+this.ad_tracking_id+"&from=list&ad_platform="+n+"&ad_sub_platform="+r})},getWorderInfo:function(){var t=this;return new Promise((function(e){t.$request("/worker/profile").then((function(t){e(t.data)}))}))},getOpenid:function(){var e=this;return new Promise((function(n){t.login({success:function(r){if("login:ok"==r.errMsg){var a={code:r.code,share_id:""};"/auth/worker/wechat/mini/openid",e.$request("/auth/worker/wechat/mini/openid",a,"POST").then((function(r){0==r.code&&(t.setStorage({key:"openid",data:r.data.open_id}),e.setToken(r.data.token),t.setStorageSync("token",r.data.token),t.setStorageSync("loginStatus","in"),n(r.data.open_id))}))}},fail:function(t){}})}))},getPhoneNumber:function(e){var n=this,r={encrypted_data:"",iv:"",code:"",openid:""};"getPhoneNumber:ok"==e.detail.errMsg&&(r.encrypted_data=e.detail.encryptedData,r.iv=e.detail.iv,r.code=e.detail.code,r.open_id=t.getStorageSync("openid"),this.$request("/auth/worker/wechat/mini/login",r,"POST").then((function(e){0==e.code&&(n.info.mobile=e.data.mobile,t.setStorageSync("token",e.data.token))})))},sureSign:function(e){var n=this,r=this,a="/guest/project/"+this.currentPro.project_id+"/lead-information",o={name:e.name,mobile:e.mobile,ad_tracking_id:this.ad_tracking_id,source:"h5"};this.$request(a,o,"POST").then((function(e){if(0==e.code){n.close(),t.showToast({title:"预约成功",duration:2e3});var a=e.data.lead_information_id,o=r.param.ad_platform?r.param.ad_platform:"",i=r.param.ad_sub_platform?r.param.ad_sub_platform:"";setTimeout((function(){t.reLaunch({url:"/pages/index/index?from=ad&pro_id="+a+"&ad_platform="+o+"&ad_sub_platform="+i})}),1e3)}}))},postParams:function(t){var e=this;return new Promise((function(n){e.$request("/ad/tracking",t,"POST").then((function(t){0==t.code&&n(t.data.ad_tracking_id)}))}))},toOpen:function(t){this.currentPro=t,this.open()},open:function(){this.showForm=!0,this.showEdit=!0},close:function(){this.showForm=!1,this.showEdit=!1}})};e.default=f}).call(this,n("df3c")["default"])}},[["4d09","common/runtime","common/vendor"]]]);