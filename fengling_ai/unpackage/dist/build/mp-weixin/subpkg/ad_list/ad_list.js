(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/ad_list/ad_list"],{3510:function(t,e,n){"use strict";var a=n("c6ac"),r=n.n(a);r.a},"37c2":function(t,e,n){"use strict";n.r(e);var a=n("a350"),r=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=r.a},5154:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uNavbar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-navbar/u-navbar")]).then(n.bind(null,"a807"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"ced5"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"c40c"))}},r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.list.length),a=t.__map(t.list,(function(e,a){var r=t.__get_orig(e),o=0!=n?t.periodList.filter((function(t){return t.value==e.worker_salary_type})):null,i=0!=n?e.highlight.length:null,u=0!=n&&0!=i?e.highlight.length:null,c=0!=n&&0!=i?t.__map(e.highlight.slice(0,3),(function(n,a){var r=t.__get_orig(n),o=e.highlight.length;return{$orig:r,g4:o}})):null;return{$orig:r,g1:o,g2:i,g3:u,l0:c}})),r=t.list.length;t.$mp.data=Object.assign({},{$root:{g0:n,l1:a,g5:r}})},o=[]},a350:function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("7eb4")),o=a(n("34cf")),i=a(n("7ca3")),u=a(n("ee10")),c=n("8f59");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=getApp(),f={data:function(){return{showForm:!1,showEdit:!1,currentPro:null,ad_tracking_id:"",imgUrl:d.globalData.baseImageUrl,marginTop:d.globalData.marginTop,tabMargin:d.globalData.tabMargin,contHeight:0,periodList:[{value:"month",text:"/月"},{value:"day",text:"/天"},{value:"hour",text:"/时"}],list:[],currentPage:1,pagination:{},open_id:"",workerInfo:null,param:null}},components:{editForm:function(){n.e("components/edit_form").then(function(){return resolve(n("621c"))}.bind(null,n)).catch(n.oe)}},onLoad:function(e){t.setNavigationBarColor({frontColor:"#000000",backgroundColor:"transparent"})},onShow:function(){var t=this;return(0,u.default)(r.default.mark((function e(){var n,a,o,i;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.contHeight=d.globalData.systemHeight-t.marginTop-t.tabMargin,n=getCurrentPages(),a=n[n.length-1],o=a.$page.fullPath,i=o.split("?").length>1?o.split("?")[1]:"",i&&(console.log("urlParamStr",i),t.param=t.getQueryParams(o)),console.log("param",t.param),e.next=9,t.getOpenid();case 9:return t.open_id=e.sent,e.next=12,t.getWorderInfo();case 12:return t.workerInfo=e.sent,e.next=15,t.postParams(t.param);case 15:t.ad_tracking_id=e.sent,t.getList();case 17:case"end":return e.stop()}}),e)})))()},methods:l(l({},(0,c.mapMutations)(["setToken"])),{},{leftClick:function(){t.navigateTo({url:"/pages/index/index"})},getQueryParams:function(t){var e=t.split("?")[1];if(!e)return{};var n=e.split("&"),a={};return n.forEach((function(t){if(t){var e=t.split("="),n=(0,o.default)(e,2),r=n[0],i=n[1];a[decodeURIComponent(r)]=decodeURIComponent(i||"")}})),a},getList:function(){var e=this;t.showLoading();var n="/guest/worker/hot-jobs?page="+this.currentPage;this.$request(n).then((function(n){0==n.code&&(t.hideLoading(),e.list=n.data)}))},toDetail:function(e){var n=this.param.ad_platform?this.param.ad_platform:"",a=this.param.ad_sub_platform?this.param.ad_sub_platform:"";t.navigateTo({url:"/subpkg/ad_page/ad_page?job_id="+e.project_id+"&ad_tracking_id="+this.ad_tracking_id+"&from=list&ad_platform="+n+"&ad_sub_platform="+a})},getWorderInfo:function(){var t=this;return new Promise((function(e){t.$request("/worker/profile").then((function(t){e(t.data)}))}))},getOpenid:function(){var e=this;return new Promise((function(n){t.login({success:function(a){if("login:ok"==a.errMsg){var r={code:a.code,share_id:""};"/auth/worker/wechat/mini/openid",e.$request("/auth/worker/wechat/mini/openid",r,"POST").then((function(a){0==a.code&&(t.setStorage({key:"openid",data:a.data.open_id}),e.setToken(a.data.token),t.setStorageSync("token",a.data.token),t.setStorageSync("loginStatus","in"),n(a.data.open_id))}))}},fail:function(t){}})}))},getPhoneNumber:function(e){var n=this,a={encrypted_data:"",iv:"",code:"",openid:""};"getPhoneNumber:ok"==e.detail.errMsg&&(a.encrypted_data=e.detail.encryptedData,a.iv=e.detail.iv,a.code=e.detail.code,a.open_id=t.getStorageSync("openid"),this.$request("/auth/worker/wechat/mini/login",a,"POST").then((function(e){0==e.code&&(n.info.mobile=e.data.mobile,t.setStorageSync("token",e.data.token))})))},sureSign:function(e){var n=this,a=this,r="/guest/project/"+this.currentPro.project_id+"/lead-information",o={name:e.name,mobile:e.mobile,ad_tracking_id:this.ad_tracking_id,source:"h5"};this.$request(r,o,"POST").then((function(e){if(0==e.code){n.close(),t.showToast({title:"预约成功",duration:2e3});var r=e.data.lead_information_id,o=a.param.ad_platform?a.param.ad_platform:"",i=a.param.ad_sub_platform?a.param.ad_sub_platform:"";setTimeout((function(){t.reLaunch({url:"/pages/index/index?from=ad&pro_id="+r+"&ad_platform="+o+"&ad_sub_platform="+i})}),1e3)}}))},postParams:function(t){var e=this;return new Promise((function(n){e.$request("/ad/tracking",t,"POST").then((function(t){0==t.code&&n(t.data.ad_tracking_id)}))}))},toOpen:function(t){this.currentPro=t,this.open()},open:function(){this.showForm=!0,this.showEdit=!0},close:function(){this.showForm=!1,this.showEdit=!1}})};e.default=f}).call(this,n("df3c")["default"])},a65c:function(t,e,n){"use strict";n.r(e);var a=n("5154"),r=n("37c2");for(var o in r)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n("3510");var i=n("828b"),u=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=u.exports},c6ac:function(t,e,n){},dee1:function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("7cc7");a(n("3240"));var r=a(n("a65c"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["dee1","common/runtime","common/vendor"]]]);